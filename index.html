<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css"/>
    <title>3d app</title>
  </head>
  <body>
    
    <div class="preloader">
      <div id="loading">loading...</div>
      <div id="wrap"></div>
      
    </div>

    <div class="experience">
      <canvas class="experience-canvas"></canvas>
    </div>

    <div class="page" asscroll-container>
      <div class="page-wrapper" asscroll>

        <section class="hero">
          <div class="hero-wrapper">

            <div class="hero-main">
              <h1 class="hero-main-title">\\plantfriend</h1>
              <p class="hero-main-description">\\compsci_student | (temp website lolol a)</p>
            </div>

            <div class="hero-second">
              <p class="hero-second-subheading">\\robin</h1>
              <p class="hero-second-subheading">\\portfolio</p>
            </div>
          </div>
        </section>

        <div class="first-move section-margin"></div>

        <section class="first-section section left">
          <div class="section-intro-wrapper">
            <h1 class="section-title">
              <span class="section-title-text">\\about me</span>
            </h1>
          </div>

          <div class="section-detail-wrapper">
            <h3 class="section-heading">Classic...forgot to write any thing..</h3>
            <p class="section-text">Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur consequatur fugiat soluta deleniti? Aperiam earum repellat, eos necessitatibus rem quas modi! Minima tempora aperiam natus quos alias atque, optio cumque!</p>
            <h3 class="section-heading">Classic...forgot to write any thing..</h3>
            <p class="section-text">Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur consequatur fugiat soluta deleniti? Aperiam earum repellat, eos necessitatibus rem quas modi! Minima tempora aperiam natus quos alias atque, optio cumque!</p>
            <h3 class="section-heading">Classic...forgot to write any thing..</h3>
            <p class="section-text">Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur consequatur fugiat soluta deleniti? Aperiam earum repellat, eos necessitatibus rem quas modi! Minima tempora aperiam natus quos alias atque, optio cumque!</p>
          </div>
        </section>

        <div class="second-move section-margin"></div>

        <section class="second-section section right">
          <div class="section-intro-wrapper">
            <h1 class="section-title">
              <span class="section-title-text">\\projects</span>
              <div class="section-title-decoration styleOne"></div>
              <div class="section-title-decoration styleTwo"></div>
              <div class="section-title-decoration styleThree"></div>
            </h1>
          </div>

          <div class="section-detail-wrapper">
            <h3 class="section-heading">Classic...forgot to write any thing..</h3>
            <p class="section-text">Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur consequatur fugiat soluta deleniti? Aperiam earum repellat, eos necessitatibus rem quas modi! Minima tempora aperiam natus quos alias atque, optio cumque!</p>
            <h3 class="section-heading">Classic...forgot to write any thing..</h3>
            <p class="section-text">Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur consequatur fugiat soluta deleniti? Aperiam earum repellat, eos necessitatibus rem quas modi! Minima tempora aperiam natus quos alias atque, optio cumque!</p>
            <h3 class="section-heading">Classic...forgot to write any thing..</h3>
            <p class="section-text">Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur consequatur fugiat soluta deleniti? Aperiam earum repellat, eos necessitatibus rem quas modi! Minima tempora aperiam natus quos alias atque, optio cumque!</p>
          </div>
        </section>

        <div class="third-move section-margin"></div>

        <section class="third-section section left">
          <div class="section-intro-wrapper">
            <h1 class="section-title">
              <span class="section-title-text">\\contact me</span>
              <div class="section-title-decoration styleOne"></div>
              <div class="section-title-decoration styleTwo"></div>
              <div class="section-title-decoration styleThree"></div>
            </h1>
          </div>

          <div class="section-detail-wrapper">
            <h3 class="section-heading">Classic...forgot to write any thing..</h3>
            <p class="section-text">Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur consequatur fugiat soluta deleniti? Aperiam earum repellat, eos necessitatibus rem quas modi! Minima tempora aperiam natus quos alias atque, optio cumque!</p>
            <h3 class="section-heading">Classic...forgot to write any thing..</h3>
            <p class="section-text">Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur consequatur fugiat soluta deleniti? Aperiam earum repellat, eos necessitatibus rem quas modi! Minima tempora aperiam natus quos alias atque, optio cumque!</p>
            <h3 class="section-heading">Classic...forgot to write any thing..</h3>
            <p class="section-text">Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur consequatur fugiat soluta deleniti? Aperiam earum repellat, eos necessitatibus rem quas modi! Minima tempora aperiam natus quos alias atque, optio cumque!</p>
          </div>
        </section>

      </div>
    </div>

    

    <script id="vertexShader" type="x-shader/x-vertex">
      varying vec2 vUv;
      void main() {
        vUv = uv;
        gl_Position = projectionMatrix 
          * modelViewMatrix 
          * vec4( position, 1.0 );
      }
    </script>
    
    <script id="fragmentShader" type="x-shader/x-fragment">
      uniform float amount;
      uniform sampler2D tDiffuse;
      varying vec2 vUv;
    
      float random( vec2 p )
      {
        vec2 K1 = vec2(
          23.14069263277926, 
          2.665144142690225 
        );
        return fract( cos( dot(p,K1) ) * 12345.6789 );
      }
    
      void main() {
    
        vec4 color = texture2D( tDiffuse, vUv );
        vec2 uvRandom = vUv;
        uvRandom.y *= random(vec2(uvRandom.y,amount));
        color.rgb += random(uvRandom)*0.10;
        gl_FragColor = vec4( color  );
      }
    </script>
    
    <script type="module">

			import * as THREE from 'three';
      
var $body = document.body,
		$wrap = document.getElementById('wrap'),

		areawidth = window.innerWidth,
		areaheight = window.innerHeight,

		canvassizex = window.innerWidth,
    canvassizey = 500,

		length = window.innerWidth / 4,
		radius = 35.6,

		rotatevalue = 0.0035,
		acceleration = 0,
		animatestep = 0,
		toend = false,

		pi2 = Math.PI*2,

		group = new THREE.Group(),
		mesh,

		camera, scene, renderer;

	camera = new THREE.PerspectiveCamera(65, 1, 1, 10000);
	camera.position.z = 150;

	scene = new THREE.Scene();
	// scene.add(new THREE.AxisHelper(30));
	scene.add(group);

	class CustomCurve extends THREE.Curve {
          constructor(length, radius) {
            super();

            this.length = length;
            this.radius = radius;
            this.pi2 = Math.PI * 2;
          }

          getPoint(percent) {
            var x = this.length * Math.sin(this.pi2 * percent),
              y = this.radius * Math.cos(this.pi2 * 3 * percent),
              z, t;

            t = percent % 0.25 / 0.25;
            t = percent % 0.25 - (2 * (1 - t) * t * -0.0185 + t * t * 0.25);
            if (Math.floor(percent / 0.25) == 0 || Math.floor(percent / 0.25) == 2) {
              t *= -1;
            }
            z = this.radius * Math.sin(this.pi2 * 2 * (percent - t));

            return new THREE.Vector3(x, y, z);
          }
        }
        const customCurve = new CustomCurve(length, radius);
        mesh = new THREE.Mesh(
          new THREE.TubeGeometry(customCurve, 200, 10.1, 20, true),
          new THREE.MeshBasicMaterial({
            color: 0xe0d8d1
            // , wireframe: true
          })
        );
        group.add(mesh);

	// fake shadow
	(function() {
		var plain, i;
		for (i = 0; i < 10; i++) {
			plain = new THREE.Mesh(new THREE.PlaneGeometry(length*2+1, radius*4, 1), new THREE.MeshBasicMaterial({color: 0x292724, transparent: true, opacity: 0.13}));
			plain.position.z = -2.5+i*0.5;
			group.add(plain);
		}
	})();

	renderer = new THREE.WebGLRenderer({
		antialias: true
	});
	renderer.setPixelRatio(window.devicePixelRatio);
	renderer.setSize(canvassizex, canvassizey );
	renderer.setClearColor('#292724');

	$wrap.appendChild(renderer.domElement);

	animate();


	function start() {
		toend = true;
	}
	
	function back() {
		toend = false;
	}

	function tilt(percent) {
		group.rotation.y = percent*0.5;
	}

	function render() {

		var progress;

		animatestep = Math.max(0, Math.min(240, toend ? animatestep+1 : animatestep-4));
		acceleration = easing(animatestep, 0, 1, 240);

		if (acceleration > 0.35) {
			progress = (acceleration-0.35)/0.65;
			group.rotation.y = -Math.PI/2 *progress;
			group.position.z = 50*progress;
			progress = Math.max(0, (acceleration-0.97)/0.03);
			mesh.material.opacity = 1-progress;
			ringcover.material.opacity = ring.material.opacity = progress;
			ring.scale.x = ring.scale.y = 0.9 + 0.1*progress;
		}

		renderer.render(scene, camera);

	}

	function animate() {
		mesh.rotation.x += rotatevalue + acceleration;
		render();
		requestAnimationFrame(animate);
	}

	function easing(t,b,c,d) {if((t/=d/2)<1)return c/2*t*t+b;return c/2*((t-=2)*t*t+2)+b;}
		</script>
    
    <script type="module" src="/main.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>WE DID IT YAY OMG !! 0.0</title>
</head>
<body>
    
    <p id="access_token"></p>
    <p id="channel"></p>

    <script>
        // get access token from URL <p id="channel"></p>
        const urlParams = new URLSearchParams(window.location.search);
        const accessToken = urlParams.get('access_token');
        const regex=/[^&]*/;

        const matchToken = accessToken.match(regex);

        const token = matchToken ? matchToken[0] : '';

        // url to GET channel_ID
        const url = 'https://api.twitch.tv/helix/users';

        const headers = {
            'Client-ID': '8khtls8dc9mor80o1sp0wlx5bofig9',
            'Authorization': 'Bearer ' + token
        }
        fetch(url, {
            headers: headers
        })
            .then(response => response.json())
            .then(data => {
                const channelID = data.data[0].id;
                document.getElementById('channel').textContent = 'Channel ID: ' + channelID;
                document.getElementById('access_token').textContent = 'Access Token: ' + token;
            })
            .catch(error => {
                console.error('Error:', error);
            });
    </script>
</body>
</html>